<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <!-- 250901 추가 -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1">

    <title>event</title>

    <link rel="stylesheet" href="./static/css/reset.css">
    <link rel="stylesheet" href="./static/css/landing.css">
    <script src="./static/js/jquery-3.1.0.min.js"></script>
</head>

<body>

    <div>
        <div class="woori_landing_wrap">

            <div class="woori_landing_contents">
                <div class="woori_landing_contents_inner snow">
                    <!-- 닫힘버튼 유무에 따라 주석 -->
                    <!-- <button class="woori_close"></button> -->
                    <!-- 닫힘버튼 유무에 따라 주석 -->

                    <img src="./static/img/ki_02_01.png" alt="">
                </div>

                <div class="woori_landing_contents_inner join">
                    <!-- <img src="./static/img/ki_02_02.png" alt="" class=""> -->
                    <div class="drop_down">
                        <!-- 약관 동의 리스트 -->
                        <h1>마케팅 정보 수집 및 활용 동의</h1>
                        <ul class="agree-list" role="list">
                            <li class="agree-item">
                                <label class="agree-head">
                                    <input type="checkbox" name="tos1" />
                                    <span class="agree-title">(필수) 개인정보 수집 및 이용 동의
                                        <!-- 250916 수정 -->
                                        <br>
                                        <span style="color: #777777;">(이벤트 참여 및 경품 지급 목적)</span>
                                        <!-- 250916 수정 -->
                                    </span>
                                </label>
                                <button class="arrow" aria-expanded="false" aria-controls="panel-1"
                                    title="상세 보기"></button>
                                <div class="agree-panel privacy-contents" id="panel-1" aria-hidden="true">
                                    <h2 class="sr-only">개인정보 수집·이용 동의 안내</h2>
                                    <p> 한국정보인증㈜은 이벤트 응모자 관리, 당첨자 선정 및 안내, 경품 제공을 위하여 아래와 같이 개인정보를 수집·이용합니다.</p>
                                    <ol>
                                        <li>
                                            <h3>수집·이용 목적</h3>
                                            <ul>
                                                <li>이벤트 응모 및 경품 제공</li>
                                            </ul>
                                        </li>

                                        <li>
                                            <h3>수집·이용하는 개인정보의 항목</h3>
                                            <ul>
                                                <li> 이름, 휴대폰 번호
                                                    <br> ※ 당첨자의 경우 경품 배송을 위해 별도로 주소를 추가 수집할 수 있음
                                                    <br>* 경품 배송을 위해 배송업체(에스오로지스)에 당첨자의 개인정보가 제공될 수 있음

                                                </li>
                                            </ul>
                                        </li>

                                        <li>
                                            <h3>개인정보의 보유 및 이용 기간</h3>
                                            <ul>
                                                <li><strong>이용 목적 달성 후 1개월 내 파기</strong>
                                                </li>
                                            </ul>
                                        </li>

                                        <li>
                                            <h3>동의를 거부할 권리와 거부에 따른 불이익</h3>
                                            <ul>
                                                <li>이용자는 위 개인정보 수집·이용에 대한 동의를 거부할 권리가 있습니다. 다만, 거부 시 이벤트 응모가 불가능합니다.
                                                </li>
                                            </ul>
                                        </li>
                                    </ol>
                                </div>
                            </li>
                        </ul>
                        <!-- 확인 버튼 -->
                        <button id="agreeBtn" class="btn-disabled"
                            onclick="openPopup('증명서 제출을 \n 먼저 완료해 주세요', '','이어서 제출하기' )">응모하기</button>
                    </div>
                    <div id="popup" class="popup-overlay">
                        <div class="popup-content">
                            <h2 id="popup-tit"></h2>
                            <p id="popupMessage"></p>
                            <button id="closePopupBtn">닫기</button>
                        </div>
                    </div>
                    <script>
                        $(function () {
                            let isAnimating = false;

                            // 화살표 클릭 → 하나만 열리는 아코디언
                            $(".agree-list").on("click", ".arrow", function () {
                                if (isAnimating) return;
                                isAnimating = true;

                                const $btn = $(this);
                                const panelId = $btn.attr("aria-controls");
                                const $panel = $("#" + panelId);

                                // 진행 중 애니메이션 큐 제거
                                $(".agree-panel").stop(true, true);

                                if ($panel.is(":visible")) {
                                    // 현재 열려있으면 닫기
                                    $panel.slideUp(220).promise().done(() => {
                                        $btn.attr("aria-expanded", "false");
                                        $panel.attr("aria-hidden", "true");
                                        isAnimating = false;
                                    });
                                } else {
                                    // 다른 패널 닫고 현재만 열기
                                    const $others = $(".agree-panel:visible").not($panel);
                                    const $otherBtns = $(".arrow").not($btn);

                                    $others.slideUp(200).promise().done(() => {
                                        $otherBtns.attr("aria-expanded", "false");
                                        $others.attr("aria-hidden", "true");

                                        $panel.slideDown(220).promise().done(() => {
                                            $btn.attr("aria-expanded", "true");
                                            $panel.attr("aria-hidden", "false");
                                            isAnimating = false;
                                        });
                                    });
                                }
                            });

                            // 체크박스 모두 체크되면 버튼 활성화
                            const $checkboxes = $(".agree-item input[type=checkbox]");
                            const $button = $("#agreeBtn");

                            function updateButton() {
                                const allChecked = $checkboxes.length === $checkboxes.filter(":checked").length;
                                if (allChecked) {
                                    $button.addClass("active").prop("disabled", false);
                                } else {
                                    $button.removeClass("active").prop("disabled", true);
                                }
                            }
                            $checkboxes.on("change", updateButton);
                            updateButton(); // 초기 상태 반영
                        });

                        // 팝업 열기 0912추가
                        document.addEventListener('DOMContentLoaded', function () {
                            const closePopupBtn = document.getElementById('closePopupBtn');
                            const popup = document.getElementById('popup');
                            const popupTitle = document.getElementById('popup-tit');
                            const popupMessage = document.getElementById('popupMessage');

                            // 팝업 닫기 함수
                            function closePopup() {
                                popup.style.display = 'none';
                            }

                            // 팝업 열기 함수 (title, message, buttonText를 인자로 받음)
                            window.openPopup = function (message, title = '알림', buttonText = '닫기') {
                                popupTitle.textContent = title;
                                popupMessage.textContent = message;
                                popupMessage.style.whiteSpace = "pre-line";
                                closePopupBtn.textContent = buttonText; // 버튼 텍스트 변경
                                popup.style.display = 'flex';
                            };

                            // 닫기 버튼 클릭 시 팝업 닫기
                            closePopupBtn.addEventListener('click', closePopup);

                            // 팝업 외부 클릭 시 팝업 닫기
                            popup.addEventListener('click', function (event) {
                                if (event.target === popup) {
                                    closePopup();
                                }
                            });
                        });
                    </script>

                </div>

                <div class="woori_landing_contents_inner" style="background-color: #fff;">
                    <img src="./static/img/ki_02_04.png" alt="">

                </div>
            </div>
        </div>

    </div>

</body>

</html>